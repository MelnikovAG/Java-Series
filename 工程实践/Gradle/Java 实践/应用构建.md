# Java & JVM 应用构建

一个 Java 项目的最简单的构建脚本应用了 Java 库插件，并可选择设置项目版本和选择要使用的 Java 工具链。

```groovy
plugins {
    id 'java-library'
}

java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(11)
    }
}

version = '1.2.1'
```

通过应用 Java 库插件，你可以得到一大堆的功能。

- 一个 compileJava 任务，编译`src/main/java`下的所有 Java 源文件。
- 为 `src/test/java` 下的源文件制定的 `compileTestJava` 任务
- 一个`test`任务，运行`src/test/java`下的测试。
- 一个 jar 任务，将`src/main/resources`下的 main 编译的类和资源打包成一个名为`<project>-<version>.jar`的 JAR。
- 一个`javadoc`任务，为`main`类生成 Javadoc。

这并不足以构建任何非复杂的 Java 项目，至少，你可能会有一些文件的依赖性。但这意味着你的构建脚本只需要你的项目所特有的信息。

# 通过源码集声明你的源码文件

Gradle 的 Java 支持是第一个为构建基于源的项目引入新概念的：Source sets。其主要思想是，源文件和资源通常按类型进行逻辑分组，如应用程序代码、单元测试和集成测试。每个逻辑组通常都有自己的文件依赖性、classpaths 等的集合。值得注意的是，构成源文件集的文件不一定要位于同一个目录中，这一点很重要。

Source sets 是一个强大的概念，它把编译的几个方面联系在一起。

- 源文件和它们的位置
- 编译的 classpath，包括任何必要的依赖关系
- 编译后的类文件的位置

![](https://ngte-superbed.oss-cn-beijing.aliyuncs.com/superbed/2021/07/17/60f27a4d5132923bf87800e7.png)
